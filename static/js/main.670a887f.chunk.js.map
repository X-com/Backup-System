{"version":3,"sources":["app.tsx","index.tsx"],"names":["App","connection","useRef","useState","server","setServer","localStorage","getItem","ip","setIp","login","setLogin","password","setPassword","authorized","setAuthorized","backups","setBackups","error","setError","backupName","setBackupName","serverState","setServerState","backupNameError","setBackupNameError","handleServerChange","useCallback","event","target","value","handleIpChange","setItem","handleLoginChange","handlePasswordChange","handleLogin","preventDefault","current","close","conn","WebSocket","onmessage","message","data","msg","JSON","parse","type","success","console","onopen","send","stringify","checkIsValid","isValid","match","handleSetBackupName","newValue","handleUpdate","handleRestart","handleStop","backupNameRef","handleSave","name","focus","handleRestore","regions","className","noValidate","autoComplete","Paper","TextField","required","label","onChange","Select","MenuItem","Button","variant","color","onClick","Alert","severity","List","ListItem","ListItemIcon","ListItemText","Input","inputRef","placeholder","IconButton","title","map","backup","key","onRestore","BackupRow","isDialogOpen","setDialogOpen","handleDialogClose","handleDialogOpen","button","primary","isOpen","onClose","showRegion","region","dimension","x","z","RestoreDialog","useNumericInput","xError","handleSetX","validateX","zError","handleSetZ","validateZ","setDimension","handleSetDimension","setRegions","handleAddRegion","parseInt","handleRemoveRegion","id","newRegions","splice","showConfirm","setShowConfirm","handleConfirm","handleCancel","Dialog","open","DialogTitle","length","onRemove","join","RegionRow","handleRemove","setX","setXError","checkXIsValid","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.670a887f.chunk.js","sourcesContent":["import \"./app.css\";\nimport React, {\n  FC,\n  useCallback,\n  ChangeEventHandler,\n  useState,\n  MouseEventHandler,\n  useRef\n} from \"react\";\nimport {\n  TextField,\n  Button,\n  Paper,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Input,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  Select,\n  MenuItem\n} from \"@material-ui/core\";\nimport Description from \"@material-ui/icons/Description\";\nimport SettingsBackupRestore from \"@material-ui/icons/SettingsBackupRestore\";\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport Backup from \"@material-ui/icons/Backup\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport RemoveCircleOutline from \"@material-ui/icons/RemoveCircleOutline\";\n\nexport const App: FC = () => {\n  const connection = useRef<WebSocket>();\n  const [server, setServer] = useState(\"3000\");\n  const [ip, setIp] = useState(localStorage.getItem('ip') || \"127.0.0.1\");\n  const [login, setLogin] = useState(\"login\");\n  const [password, setPassword] = useState(\"password\");\n  const [authorized, setAuthorized] = useState(false);\n  const [backups, setBackups] = useState<string[]>([]);\n  const [error, setError] = useState(\"\");\n  const [backupName, setBackupName] = useState(\"\");\n  const [serverState, setServerState] = useState(\"unknown\");\n  const [backupNameError, setBackupNameError] = useState(false);\n\n  const handleServerChange = useCallback<ChangeEventHandler<{value:unknown}>>(\n    event => {\n      setServer(event.target.value as any);\n    },\n    []\n  );\n  \n  const handleIpChange = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    event => {\n      localStorage.setItem('ip', event.target.value)\n      setIp(event.target.value);\n    },\n    []\n  );\n\n  const handleLoginChange = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    event => {\n      setLogin(event.target.value);\n    },\n    []\n  );\n\n  const handlePasswordChange = useCallback<\n    ChangeEventHandler<HTMLInputElement>\n  >(event => {\n    setPassword(event.target.value);\n  }, []);\n\n  const handleLogin = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    event => {\n      event.preventDefault();\n      if (connection.current) {\n        connection.current.close();\n      }\n      const conn = (connection.current = new WebSocket(`ws://${ip}:${server}/`));\n      conn.onmessage = message => {\n        const { data } = message;\n        if (typeof data !== \"string\") {\n          return;\n        }\n        const msg = JSON.parse(data);\n        // no validation here: client-side problems will be apparent on the client\n        switch (msg.type) {\n          case \"auth\": {\n            if (msg.success) {\n              setError(\"\");\n              setAuthorized(true);\n            } else {\n              setError(\"Wrong user name or password\");\n            }\n            return;\n          }\n          case \"state\": {\n            setServerState(msg.value);\n            return;\n          }\n          case \"backups\": {\n            setBackups(msg.value);\n            return;\n          }\n          default: {\n            console.error(\"Got weird message\", data);\n            return;\n          }\n        }\n      };\n      conn.onopen = () => {\n        conn.send(\n          JSON.stringify({\n            type: \"auth\",\n            login,\n            password\n          })\n        );\n      };\n    },\n    [login, password, server, ip], \n  );\n\n  const checkIsValid = useCallback((backupName: string) => {\n    const isValid = backupName.match(/^[a-zA-Z0-9 '-]+$/);\n    setBackupNameError(!isValid);\n    return isValid;\n  }, []);\n\n  const handleSetBackupName = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    event => {\n      const newValue = event.target.value;\n      setBackupName(newValue);\n      checkIsValid(newValue);\n    },\n    [checkIsValid]\n  );\n\n  const handleUpdate = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    event => {\n      event.preventDefault();\n      const conn = connection.current;\n      if (!conn) {\n        return;\n      }\n      conn.send(\n        JSON.stringify({\n          type: \"update\"\n        })\n      );\n    },\n    []\n  );\n\n  const handleRestart = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    event => {\n      event.preventDefault();\n      const conn = connection.current;\n      if (!conn) {\n        return;\n      }\n      conn.send(\n        JSON.stringify({\n          type: \"restart\"\n        })\n      );\n    },\n    []\n  );\n\n  const handleStop = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    event => {\n      event.preventDefault();\n      const conn = connection.current;\n      if (!conn) {\n        return;\n      }\n      conn.send(\n        JSON.stringify({\n          type: \"stop\"\n        })\n      );\n    },\n    []\n  );\n\n  const backupNameRef = useRef<HTMLInputElement>(null);\n  const handleSave = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    event => {\n      event.preventDefault();\n      if (!checkIsValid(backupName)) {\n        if (backupNameRef.current) {\n          backupNameRef.current.focus();\n        }\n        return;\n      }\n      const conn = connection.current;\n      if (!conn) {\n        return;\n      }\n      conn.send(\n        JSON.stringify({\n          type: \"save\",\n          name: backupName\n        })\n      );\n    },\n    [backupName, checkIsValid]\n  );\n\n  const handleRestore = useCallback((name: string, regions: Region[]) => {\n    const conn = connection.current;\n    if (!conn) {\n      return;\n    }\n    conn.send(\n      JSON.stringify({\n        type: \"restore\",\n        name,\n        regions\n      })\n    );\n  }, []);\n\n  return (\n    <div className=\"app\">\n      {authorized ? null : (\n        <form noValidate autoComplete=\"off\">\n          <Paper className=\"app__form\">\n            <TextField\n              className=\"app__input\"\n              required\n              label=\"Ip\"\n              value={ip}\n              onChange={handleIpChange}\n            />\n            <Select className=\"app__input\" required label=\"Server\" value={server} onChange={handleServerChange}>\n              <MenuItem value=\"3000\">Survival</MenuItem>\n              <MenuItem value=\"3001\">Creative</MenuItem>\n              <MenuItem value=\"3002\">Survival Copy</MenuItem>\n            </Select>\n            <TextField\n              className=\"app__input\"\n              required\n              label=\"Login\"\n              value={login}\n              onChange={handleLoginChange}\n            />\n            <TextField\n              className=\"app__input\"\n              required\n              label=\"Password\"\n              type=\"password\"\n              value={password}\n              onChange={handlePasswordChange}\n            />\n            <div className=\"app__button\">\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleLogin}\n              >\n                Log in\n              </Button>\n            </div>\n          </Paper>\n        </form>\n      )}\n      {error ? (\n        <Alert className=\"app__alert\" severity=\"error\">\n          {error}\n        </Alert>\n      ) : null}\n      {authorized ? (\n        <Paper className=\"app__form\">\n          <div className=\"app__second\">\n            <div className=\"app__button\">\n              <Button\n                className=\"app__button2\"\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleUpdate}\n              >\n                Update carpet\n              </Button>\n              <Button\n                className=\"app__button2\"\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleRestart}\n              >\n                Restart\n              </Button>\n              <Button\n                className=\"app__button2\"\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleStop}\n              >\n                Stop\n              </Button>\n              <div className=\"app__server-state\">{serverState}</div>\n            </div>\n            <List>\n              <ListItem>\n                <ListItemIcon>\n                  <AddBox />\n                </ListItemIcon>\n                <ListItemText>\n                  <Input\n                    inputRef={backupNameRef}\n                    placeholder=\"Backup name\"\n                    value={backupName}\n                    error={backupNameError}\n                    onChange={handleSetBackupName}\n                  />\n                </ListItemText>\n                <IconButton title=\"Save backup\" onClick={handleSave}>\n                  <Backup />\n                </IconButton>\n              </ListItem>\n              {backups.map((backup, key) => (\n                <BackupRow\n                  key={key}\n                  backup={backup}\n                  onRestore={handleRestore}\n                />\n              ))}\n            </List>\n          </div>\n        </Paper>\n      ) : null}\n    </div>\n  );\n};\n\ntype BackupRowProps = {\n  backup: string;\n  onRestore: (name: string, regions: Region[]) => void;\n};\n\nconst BackupRow: FC<BackupRowProps> = ({ backup, onRestore }) => {\n  const [isDialogOpen, setDialogOpen] = useState(false);\n  const handleDialogClose = useCallback(() => {\n    setDialogOpen(false);\n  }, []);\n  const handleDialogOpen = useCallback(() => {\n    setDialogOpen(true);\n  }, []);\n  return (\n    <>\n      <ListItem button>\n        <ListItemIcon>\n          <Description />\n        </ListItemIcon>\n        <ListItemText primary={backup} />\n        <IconButton title=\"Restore from backup\" onClick={handleDialogOpen}>\n          <SettingsBackupRestore />\n        </IconButton>\n      </ListItem>\n      <RestoreDialog\n        backup={backup}\n        isOpen={isDialogOpen}\n        onClose={handleDialogClose}\n        onRestore={onRestore}\n      />\n    </>\n  );\n};\n\ntype DialogProps = {\n  backup: string;\n  isOpen: boolean;\n  onClose: () => void;\n  onRestore: (name: string, regions: Region[]) => void;\n};\n\ntype Dimension = \"overworld\" | \"nether\" | \"end\";\ninterface Region {\n  dimension: Dimension;\n  x: number;\n  z: number;\n}\n\nconst showRegion = (region: Region): string => {\n  const { dimension, x, z } = region;\n  return `${dimension} ${x} ${z}`;\n};\n\nconst RestoreDialog: FC<DialogProps> = ({\n  backup,\n  isOpen,\n  onClose,\n  onRestore\n}) => {\n  const [x, xError, handleSetX, validateX] = useNumericInput();\n  const [z, zError, handleSetZ, validateZ] = useNumericInput();\n\n  const [dimension, setDimension] = useState<Dimension>(\"overworld\");\n  const handleSetDimension = useCallback<\n    ChangeEventHandler<{\n      value: unknown;\n    }>\n  >(event => {\n    setDimension(event.target.value as Dimension);\n  }, []);\n\n  const [regions, setRegions] = useState<Region[]>([]);\n  const handleAddRegion = useCallback(() => {\n    if (!validateX(x) || !validateZ(z)) {\n      return;\n    }\n    setRegions([\n      ...regions,\n      {\n        dimension,\n        x: parseInt(x, 10),\n        z: parseInt(z, 10)\n      }\n    ]);\n  }, [regions, dimension, x, z, validateX, validateZ]);\n\n  const handleRemoveRegion = useCallback(\n    (id: number) => {\n      const newRegions = [...regions];\n      newRegions.splice(id, 1);\n      setRegions(newRegions);\n    },\n    [regions]\n  );\n\n  const [showConfirm, setShowConfirm] = useState(false);\n  const handleRestore = useCallback(() => {\n    onClose();\n    onRestore(backup, regions);\n    setShowConfirm(false);\n  }, [regions, onRestore, onClose, backup]);\n  const handleConfirm = useCallback(() => {\n    setShowConfirm(true);\n  }, []);\n  const handleCancel = useCallback(() => {\n    setShowConfirm(false);\n  }, []);\n\n  return (\n    <Dialog onClose={onClose} open={isOpen} className=\"dialog\">\n      <DialogTitle>Restore backup {backup}</DialogTitle>\n      <List>\n        <ListItem className=\"dialog__row\">\n          <Select value={dimension} onChange={handleSetDimension}>\n            <MenuItem value=\"overworld\">Overworld</MenuItem>\n            <MenuItem value=\"nether\">Nether</MenuItem>\n            <MenuItem value=\"end\">End</MenuItem>\n          </Select>\n          <Input\n            className=\"dialog__input\"\n            placeholder=\"X\"\n            value={x}\n            error={xError}\n            onChange={handleSetX}\n          />\n          <Input\n            className=\"dialog__input\"\n            placeholder=\"Z\"\n            value={z}\n            error={zError}\n            onChange={handleSetZ}\n          />\n          <IconButton title=\"Add\" onClick={handleAddRegion}>\n            <AddBox />\n          </IconButton>\n        </ListItem>\n        {regions.length ? (\n          regions.map((region, key) => (\n            <RegionRow\n              key={key}\n              id={key}\n              region={region}\n              onRemove={handleRemoveRegion}\n            />\n          ))\n        ) : (\n          <ListItem button>\n            <ListItemText primary=\"No specific regions selected. Restore all regions and player files\" />\n          </ListItem>\n        )}\n      </List>\n      <Button\n        className=\"dialog__button\"\n        type=\"submit\"\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handleConfirm}\n      >\n        Restore\n      </Button>\n      {showConfirm ? (\n        <div className=\"dialog__confirm\">\n          <div className=\"dialog__text\">\n            Restore{\" \"}\n            {regions.length\n              ? regions.map(showRegion).join(\"; \")\n              : \"whole world (with player files etc.)\"}\n            {\"?\"}\n          </div>\n          <div className=\"dialog__buttons\">\n            <Button\n              className=\"dialog__yes\"\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={handleRestore}\n            >\n              I'm sure\n            </Button>\n            <Button\n              className=\"dialog__no\"\n              variant=\"contained\"\n              onClick={handleCancel}\n            >\n              Cancel\n            </Button>\n          </div>\n        </div>\n      ) : null}\n    </Dialog>\n  );\n};\n\ntype RegionRowProps = {\n  id: number;\n  region: Region;\n  onRemove: (id: number) => void;\n};\n\nconst RegionRow: FC<RegionRowProps> = ({ id, region, onRemove }) => {\n  const handleRemove = useCallback(() => {\n    onRemove(id);\n  }, [id, onRemove]);\n\n  return (\n    <ListItem button onClick={handleRemove}>\n      <ListItemText primary={showRegion(region)} />\n      <IconButton title=\"Remove\">\n        <RemoveCircleOutline />\n      </IconButton>\n    </ListItem>\n  );\n};\n\nconst useNumericInput = () => {\n  const [x, setX] = useState(\"\");\n  const [xError, setXError] = useState(false);\n\n  const checkXIsValid = useCallback((value: string) => {\n    const isValid = value.match(/^-?[0-9]+$/);\n    setXError(!isValid);\n    return isValid;\n  }, []);\n\n  const handleSetX = useCallback<ChangeEventHandler<HTMLInputElement>>(\n    event => {\n      const newValue = event.target.value;\n      setX(newValue);\n      checkXIsValid(newValue);\n    },\n    [checkXIsValid]\n  );\n\n  return [x, xError, handleSetX, checkXIsValid] as const;\n};\n","import \"./index.css\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./app\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}