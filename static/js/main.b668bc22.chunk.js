(this["webpackJsonphekate-console-client"]=this["webpackJsonphekate-console-client"]||[]).push([[0],{76:function(e,a,t){e.exports=t(87)},77:function(e,a,t){},82:function(e,a,t){},87:function(e,a,t){"use strict";t.r(a);t(77);var n=t(0),c=t.n(n),l=t(8),r=t.n(l),o=t(51),u=t(10),s=(t(82),t(117)),i=t(133),m=t(130),b=t(124),p=t(125),v=t(123),O=t(88),d=t(127),f=t(128),E=t(121),j=t(126),g=t(134),k=t(129),C=t(66),_=t.n(C),y=t(67),N=t.n(y),S=t(50),h=t.n(S),w=t(65),R=t.n(w),J=t(131),I=t(68),D=t.n(I),q=function(){var e=Object(n.useRef)(),a=Object(n.useState)("3000"),t=Object(u.a)(a,2),l=t[0],r=t[1],o=Object(n.useState)(localStorage.getItem("ip")||"127.0.0.1"),g=Object(u.a)(o,2),k=g[0],C=g[1],_=Object(n.useState)(""),y=Object(u.a)(_,2),N=y[0],S=y[1],w=Object(n.useState)(""),I=Object(u.a)(w,2),D=I[0],q=I[1],z=Object(n.useState)(!1),A=Object(u.a)(z,2),B=A[0],L=A[1],W=Object(n.useState)([]),Z=Object(u.a)(W,2),$=Z[0],F=Z[1],G=Object(n.useState)(""),P=Object(u.a)(G,2),U=P[0],V=P[1],X=Object(n.useState)(""),H=Object(u.a)(X,2),K=H[0],M=H[1],Q=Object(n.useState)("unknown"),T=Object(u.a)(Q,2),Y=T[0],ee=T[1],ae=Object(n.useState)(!1),te=Object(u.a)(ae,2),ne=te[0],ce=te[1],le=Object(n.useCallback)((function(e){r(e.target.value)}),[]),re=Object(n.useCallback)((function(e){localStorage.setItem("ip",e.target.value),C(e.target.value)}),[]),oe=Object(n.useCallback)((function(e){S(e.target.value)}),[]),ue=Object(n.useCallback)((function(e){q(e.target.value)}),[]),se=Object(n.useCallback)((function(a){a.preventDefault(),e.current&&e.current.close();var t=e.current=new WebSocket("ws://".concat(k,":").concat(l,"/"));t.onmessage=function(e){var a=e.data;if("string"===typeof a){var t=JSON.parse(a);switch(t.type){case"auth":return void(t.success?(V(""),L(!0)):V("Wrong user name or password"));case"state":return void ee(t.value);case"backups":return void F(t.value);default:return void console.error("Got weird message",a)}}},t.onopen=function(){t.send(JSON.stringify({type:"auth",login:N,password:D}))}}),[N,D,l,k]),ie=Object(n.useCallback)((function(e){var a=e.match(/^[a-zA-Z0-9 '-]+$/);return ce(!a),a}),[]),me=Object(n.useCallback)((function(e){var a=e.target.value;M(a),ie(a)}),[ie]),be=Object(n.useCallback)((function(a){a.preventDefault();var t=e.current;t&&t.send(JSON.stringify({type:"update"}))}),[]),pe=Object(n.useCallback)((function(a){a.preventDefault();var t=e.current;t&&t.send(JSON.stringify({type:"restart"}))}),[]),ve=Object(n.useCallback)((function(a){a.preventDefault();var t=e.current;t&&t.send(JSON.stringify({type:"stop"}))}),[]),Oe=Object(n.useRef)(null),de=Object(n.useCallback)((function(a){if(a.preventDefault(),ie(K)){var t=e.current;t&&t.send(JSON.stringify({type:"save",name:K}))}else Oe.current&&Oe.current.focus()}),[K,ie]),fe=Object(n.useCallback)((function(a,t){var n=e.current;n&&n.send(JSON.stringify({type:"restore",name:a,regions:t}))}),[]);return c.a.createElement("div",{className:"app"},B?null:c.a.createElement("form",{noValidate:!0,autoComplete:"off"},c.a.createElement(s.a,{className:"app__form"},c.a.createElement(i.a,{className:"app__input",required:!0,label:"Ip",value:k,onChange:re}),c.a.createElement(m.a,{className:"app__input",required:!0,label:"Server",value:l,onChange:le},c.a.createElement(b.a,{value:"3000"},"Survival"),c.a.createElement(b.a,{value:"3001"},"Creative"),c.a.createElement(b.a,{value:"3002"},"Survival Copy")),c.a.createElement(i.a,{className:"app__input",required:!0,label:"Login",value:N,onChange:oe}),c.a.createElement(i.a,{className:"app__input",required:!0,label:"Password",type:"password",value:D,onChange:ue}),c.a.createElement("div",{className:"app__button"},c.a.createElement(p.a,{type:"submit",variant:"contained",color:"primary",onClick:se},"Log in")))),U?c.a.createElement(J.a,{className:"app__alert",severity:"error"},U):null,B?c.a.createElement(s.a,{className:"app__form"},c.a.createElement("div",{className:"app__second"},c.a.createElement("div",{className:"app__button"},c.a.createElement(p.a,{className:"app__button2",variant:"contained",color:"primary",onClick:be},"Update carpet"),c.a.createElement(p.a,{className:"app__button2",variant:"contained",color:"primary",onClick:pe},"Restart"),c.a.createElement(p.a,{className:"app__button2",variant:"contained",color:"primary",onClick:ve},"Stop"),c.a.createElement("div",{className:"app__server-state"},Y)),c.a.createElement(v.a,null,c.a.createElement(O.a,null,c.a.createElement(d.a,null,c.a.createElement(h.a,null)),c.a.createElement(f.a,null,c.a.createElement(E.a,{inputRef:Oe,placeholder:"Backup name",value:K,error:ne,onChange:me})),c.a.createElement(j.a,{title:"Save backup",onClick:de},c.a.createElement(R.a,null))),$.map((function(e,a){return c.a.createElement(x,{key:a,backup:e,onRestore:fe})}))))):null)},x=function(e){var a=e.backup,t=e.onRestore,l=Object(n.useState)(!1),r=Object(u.a)(l,2),o=r[0],s=r[1],i=Object(n.useCallback)((function(){s(!1)}),[]),m=Object(n.useCallback)((function(){s(!0)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{button:!0},c.a.createElement(d.a,null,c.a.createElement(_.a,null)),c.a.createElement(f.a,{primary:a}),c.a.createElement(j.a,{title:"Restore from backup",onClick:m},c.a.createElement(N.a,null))),c.a.createElement(A,{backup:a,isOpen:o,onClose:i,onRestore:t}))},z=function(e){var a=e.dimension,t=e.x,n=e.z;return"".concat(a," ").concat(t," ").concat(n)},A=function(e){var a=e.backup,t=e.isOpen,l=e.onClose,r=e.onRestore,s=L(),i=Object(u.a)(s,4),d=i[0],C=i[1],_=i[2],y=i[3],N=L(),S=Object(u.a)(N,4),w=S[0],R=S[1],J=S[2],I=S[3],D=Object(n.useState)("overworld"),q=Object(u.a)(D,2),x=q[0],A=q[1],W=Object(n.useCallback)((function(e){A(e.target.value)}),[]),Z=Object(n.useState)([]),$=Object(u.a)(Z,2),F=$[0],G=$[1],P=Object(n.useCallback)((function(){y(d)&&I(w)&&G([].concat(Object(o.a)(F),[{dimension:x,x:parseInt(d,10),z:parseInt(w,10)}]))}),[F,x,d,w,y,I]),U=Object(n.useCallback)((function(e){var a=Object(o.a)(F);a.splice(e,1),G(a)}),[F]),V=Object(n.useState)(!1),X=Object(u.a)(V,2),H=X[0],K=X[1],M=Object(n.useCallback)((function(){l(),r(a,F),K(!1)}),[F,r,l,a]),Q=Object(n.useCallback)((function(){K(!0)}),[]),T=Object(n.useCallback)((function(){K(!1)}),[]);return c.a.createElement(g.a,{onClose:l,open:t,className:"dialog"},c.a.createElement(k.a,null,"Restore backup ",a),c.a.createElement(v.a,null,c.a.createElement(O.a,{className:"dialog__row"},c.a.createElement(m.a,{value:x,onChange:W},c.a.createElement(b.a,{value:"overworld"},"Overworld"),c.a.createElement(b.a,{value:"nether"},"Nether"),c.a.createElement(b.a,{value:"end"},"End")),c.a.createElement(E.a,{className:"dialog__input",placeholder:"X",value:d,error:C,onChange:_}),c.a.createElement(E.a,{className:"dialog__input",placeholder:"Z",value:w,error:R,onChange:J}),c.a.createElement(j.a,{title:"Add",onClick:P},c.a.createElement(h.a,null))),F.length?F.map((function(e,a){return c.a.createElement(B,{key:a,id:a,region:e,onRemove:U})})):c.a.createElement(O.a,{button:!0},c.a.createElement(f.a,{primary:"No specific regions selected. Restore all regions and player files"}))),c.a.createElement(p.a,{className:"dialog__button",type:"submit",variant:"contained",color:"primary",onClick:Q},"Restore"),H?c.a.createElement("div",{className:"dialog__confirm"},c.a.createElement("div",{className:"dialog__text"},"Restore"," ",F.length?F.map(z).join("; "):"whole world (with player files etc.)","?"),c.a.createElement("div",{className:"dialog__buttons"},c.a.createElement(p.a,{className:"dialog__yes",type:"submit",variant:"contained",color:"primary",onClick:M},"I'm sure"),c.a.createElement(p.a,{className:"dialog__no",variant:"contained",onClick:T},"Cancel"))):null)},B=function(e){var a=e.id,t=e.region,l=e.onRemove,r=Object(n.useCallback)((function(){l(a)}),[a,l]);return c.a.createElement(O.a,{button:!0,onClick:r},c.a.createElement(f.a,{primary:z(t)}),c.a.createElement(j.a,{title:"Remove"},c.a.createElement(D.a,null)))},L=function(){var e=Object(n.useState)(""),a=Object(u.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(!1),r=Object(u.a)(l,2),o=r[0],s=r[1],i=Object(n.useCallback)((function(e){var a=e.match(/^-?[0-9]+$/);return s(!a),a}),[]);return[t,o,Object(n.useCallback)((function(e){var a=e.target.value;c(a),i(a)}),[i]),i]};r.a.render(c.a.createElement(q,null),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.b668bc22.chunk.js.map